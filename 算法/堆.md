# 堆

**完全二叉树**结构，一般用数组记录

但是在完全二叉树的基础上，堆额外要求**每一个子树**的根节点和子节点要符合一定的规则。

- 大顶堆：根节点 >= 子节点
- 小顶堆：根节点 <= 子节点
- 堆只有这两种



如果数组的第一个元素index是0，一个index是i的节点：

- 左子 = 2i+1
- 右子 = 2i+2
- 父节点 = (i-1)/2（注意根节点没有父节点）

如果数组的第一个元素index是1，一个index是i的节点：

- 左子 = 2i, `i << 1`
- 右子 = 2i+1, `(i << 1) | 1`
- 父节点 = i/2, `i >> 1`
- 0位置被抛弃，目的是可以使用位运算计算下标，更快



**操作**（以大顶堆为例）

- 插入新值：heapSize++，插入在数组最后，如果新数字>父节点就交换，重复直到新数字<=父节点**或**它已经在堆顶
- 删除最大值：heapSize--，将最小值从最后一个位置提到0位置，也就是最大值位置，heapify
- heapify：如果根节点数字被更新，且新数字<=左子或右子，新数字与max(左右子)交换，重复直到新数字>=左右子**或**它已经在堆底

